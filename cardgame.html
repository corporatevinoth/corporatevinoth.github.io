<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guess the Image Game</title>
    <style>
        /* General Body Styling */
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f0f0; /* Light grey background */
            margin: 0;
            overflow: hidden; /* Hide scrollbars caused by snow */
        }

        /* Game Container */
        .game-container {
            background-color: #fff; /* White background for the game card */
            padding: 20px; /* Adjusted padding for smaller screens */
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Subtle shadow */
            text-align: center;
            width: 95%; /* Take up more width on smaller screens */
            max-width: 480px; /* Reduced max width for mobile */
            z-index: 1; /* Ensure game content is above snow */
            position: relative; /* For z-index to work */
        }

        h1 {
            color: #333;
            margin-bottom: 15px; /* Reduced margin */
            font-size: 1.8em; /* Adjusted font size for mobile */
        }

        .score-display {
            font-size: 1.1em; /* Adjusted font size */
            margin-bottom: 15px; /* Reduced margin */
            color: #555;
        }

        /* Card Styling */
        .card {
            border: 1px solid #ddd; /* Thinner border */
            border-radius: 8px;
            padding: 15px; /* Reduced padding */
            margin-bottom: 15px; /* Reduced margin */
            background-color: #f9f9f9; /* Slightly off-white for the card */
        }

        #card-image {
            max-width: 100%;
            height: auto; /* Adjust height automatically */
            max-height: 180px; /* Maximum height for the image */
            object-fit: contain; /* Ensures the whole image is visible */
            margin-bottom: 10px; /* Reduced margin */
            border-radius: 5px;
            background-color: #e9e9e9; /* Placeholder background for image */
        }

        #question {
            font-size: 1.3em; /* Adjusted font size */
            color: #444;
            margin-bottom: 15px; /* Reduced margin */
        }

        /* Input Area */
        .input-area {
            display: flex;
            flex-direction: column; /* Stack input and button on smaller screens */
            align-items: stretch; /* Make them take full width */
            gap: 10px; /* Space between input and button */
            margin-bottom: 15px; /* Reduced margin */
        }

        #user-input {
            padding: 10px;
            font-size: 1em;
            border: 1px solid #ccc;
            border-radius: 5px;
            flex-grow: 1;
            max-width: none; /* Allow full width */
        }

        #voice-input-btn {
            padding: 10px 15px;
            font-size: 1em;
            background-color: #007bff; /* Blue button */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        #voice-input-btn:hover {
            background-color: #0056b3; /* Darker blue on hover */
        }

        #feedback {
            font-size: 1em; /* Adjusted font size */
            font-weight: bold;
            min-height: 20px; /* Reserve space to prevent layout shifts */
            margin-bottom: 10px; /* Reduced margin */
        }

        .correct {
            color: green;
        }

        .incorrect {
            color: red;
        }

        #next-card-btn {
            padding: 12px 25px;
            font-size: 1em; /* Adjusted font size */
            background-color: #28a745; /* Green button */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-top: 10px; /* Reduced margin */
        }

        #next-card-btn:hover {
            background-color: #218838; /* Darker green on hover */
        }

        .hidden {
            display: none;
        }

        /* --- Snow Falling Effect --- */
        .snow-container {
            position: fixed; /* Fixed to viewport */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Allow clicks on elements below */
            z-index: -1; /* Behind other content */
        }

        .snowflake {
            position: absolute;
            background-color: white;
            border-radius: 50%; /* Make them round */
            opacity: 0.7; /* Slightly transparent */
            animation: fall linear infinite; /* Apply fall animation */
        }

        @keyframes fall {
            to {
                transform: translateY(105vh) translateX(var(--sideways-drift)); /* Fall past the viewport */
            }
        }

        /* Media Queries for larger screens (desktops) */
        @media (min-width: 768px) {
            .game-container {
                padding: 30px;
                max-width: 600px; /* Larger max-width for desktops */
            }

            h1 {
                font-size: 2.2em;
            }

            .score-display {
                font-size: 1.2em;
            }

            .card {
                padding: 20px;
            }

            #card-image {
                max-height: 200px; /* Slightly taller on desktop */
            }

            #question {
                font-size: 1.5em;
            }

            .input-area {
                flex-direction: row; /* Side-by-side on larger screens */
                align-items: center;
            }

            #user-input {
                max-width: 250px; /* Specific max-width for desktop input */
            }

            #next-card-btn {
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <div class="snow-container" id="snow-container"></div>
    <div class="game-container">
        <h1>Guess the Image!</h1>
        <div class="score-display">Score: <span id="score">0</span></div>

        <div class="card">
            <img id="card-image" src="" alt="Guess this image">
            <p id="question">What is this?</p>
            <div class="input-area">
                <input type="text" id="user-input" placeholder="Type your answer...">
                <button id="voice-input-btn">ðŸŽ¤ Speak Answer</button>
            </div>
            <p id="feedback"></p>
        </div>

        <button id="next-card-btn" class="hidden">Next Card</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cardImage = document.getElementById('card-image');
            const questionElement = document.getElementById('question');
            const userInput = document.getElementById('user-input');
            const voiceInputBtn = document.getElementById('voice-input-btn');
            const feedbackElement = document.getElementById('feedback');
            const scoreDisplay = document.getElementById('score');
            const nextCardBtn = document.getElementById('next-card-btn');
            const snowContainer = document.getElementById('snow-container');

            let score = 0;
            let currentCard = {};
            let speechRecognition;
            const numberOfSnowflakes = 50; // Adjust for more/fewer snowflakes

            // --- Game Data ---
            // Remember to replace these placeholder URLs with actual image paths if you host them yourself!
            const gameData = [
                // Animals
                { type: 'animal', name: 'lion', image: 'https://via.placeholder.com/200x200/FF5733/FFFFFF?text=Lion' },
                { type: 'animal', name: 'elephant', image: 'https://via.placeholder.com/200x200/33FF57/FFFFFF?text=Elephant' },
                { type: 'animal', name: 'zebra', image: 'https://via.placeholder.com/200x200/3357FF/FFFFFF?text=Zebra' },
                { type: 'animal', name: 'giraffe', image: 'https://via.placeholder.com/200x200/F0F0F0/000000?text=Giraffe' },
                { type: 'animal', name: 'tiger', image: 'https://via.placeholder.com/200x200/800080/FFFFFF?text=Tiger' },
                { type: 'animal', name: 'monkey', image: 'https://via.placeholder.com/200x200/00FFFF/000000?text=Monkey' },
                // Shapes
                { type: 'shape', name: 'circle', image: 'https://via.placeholder.com/200x200/FFC300/000000?text=Circle' },
                { type: 'shape', name: 'square', image: 'https://via.placeholder.com/200x200/C70039/FFFFFF?text=Square' },
                { type: 'shape', name: 'triangle', image: 'https://via.placeholder.com/200x200/900C3F/FFFFFF?text=Triangle' },
                { type: 'shape', name: 'star', image: 'https://via.placeholder.com/200x200/DAF7A6/000000?text=Star' },
                // Numbers
                { type: 'number', name: 'one', image: 'https://via.placeholder.com/200x200/581845/FFFFFF?text=1' },
                { type: 'number', name: 'two', image: 'https://via.placeholder.com/200x200/FFC300/000000?text=2' },
                { type: 'number', name: 'three', image: 'https://via.placeholder.com/200x200/2ECC71/FFFFFF?text=3' },
                { type: 'number', name: 'four', image: 'https://via.placeholder.com/200x200/3498DB/FFFFFF?text=4' },
                { type: 'number', name: 'five', image: 'https://via.placeholder.com/200x200/E74C3C/FFFFFF?text=5' },
                // Vegetables
                { type: 'vegetable', name: 'carrot', image: 'https://via.placeholder.com/200x200/FF5733/FFFFFF?text=Carrot' },
                { type: 'vegetable', name: 'broccoli', image: 'https://via.placeholder.com/200x200/28B463/FFFFFF?text=Broccoli' },
                { type: 'vegetable', name: 'tomato', image: 'https://via.placeholder.com/200x200/CB4335/FFFFFF?text=Tomato' },
                { type: 'vegetable', name: 'potato', image: 'https://via.placeholder.com/200x200/8A440D/FFFFFF?text=Potato' },
                // Fruits
                { type: 'fruit', name: 'apple', image: 'https://via.placeholder.com/200x200/C0392B/FFFFFF?text=Apple' },
                { type: 'fruit', name: 'banana', image: 'https://via.placeholder.com/200x200/F1C40F/000000?text=Banana' },
                { type: 'fruit', name: 'orange', image: 'https://via.placeholder.com/200x200/E67E22/FFFFFF?text=Orange' },
                { type: 'fruit', name: 'grapes', image: 'https://via.placeholder.com/200x200/8E44AD/FFFFFF?text=Grapes' },
            ];

            // --- Game Functions ---

            function getRandomCard() {
                const randomIndex = Math.floor(Math.random() * gameData.length);
                return gameData[randomIndex];
            }

            function displayNewCard() {
                currentCard = getRandomCard();
                cardImage.src = currentCard.image;
                questionElement.textContent = 'What is this?';
                feedbackElement.textContent = ''; // Clear previous feedback
                userInput.value = ''; // Clear input field
                userInput.focus(); // Focus on input for easy typing
                nextCardBtn.classList.add('hidden'); // Hide next card button
                userInput.disabled = false; // Enable input
                voiceInputBtn.disabled = false; // Enable voice button
            }

            function checkAnswer(answer) {
                const normalizedAnswer = answer.toLowerCase().trim();
                const correctAnswer = currentCard.name.toLowerCase();

                if (normalizedAnswer === correctAnswer) {
                    score++;
                    scoreDisplay.textContent = score;
                    feedbackElement.textContent = 'Correct! ðŸŽ‰';
                    feedbackElement.className = 'correct';
                    userInput.disabled = true; // Disable input after correct answer
                    voiceInputBtn.disabled = true;
                    nextCardBtn.classList.remove('hidden'); // Show next card button
                } else {
                    feedbackElement.textContent = `Incorrect. Try again!`;
                    feedbackElement.className = 'incorrect';
                    // Optionally, you could provide a hint here.
                }
            }

            // --- Event Listeners ---

            // Keyboard input
            userInput.addEventListener('keydown', (event) => {
                if (event.key === 'Enter' && userInput.value.trim() !== '') {
                    checkAnswer(userInput.value);
                }
            });

            // Voice input
            voiceInputBtn.addEventListener('click', () => {
                // Check if Web Speech API is supported
                if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {
                    speechRecognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                    speechRecognition.continuous = false; // Stop after a single utterance
                    speechRecognition.lang = 'en-US'; // Set language

                    speechRecognition.onstart = () => {
                        feedbackElement.textContent = 'Listening... Speak now.';
                        feedbackElement.className = '';
                        voiceInputBtn.textContent = 'ðŸŽ¤ Listening...';
                        voiceInputBtn.disabled = true;
                    };

                    speechRecognition.onresult = (event) => {
                        const speechResult = event.results[0][0].transcript;
                        userInput.value = speechResult;
                        checkAnswer(speechResult);
                        voiceInputBtn.textContent = 'ðŸŽ¤ Speak Answer';
                        voiceInputBtn.disabled = false;
                    };

                    speechRecognition.onerror = (event) => {
                        console.error('Speech recognition error:', event.error);
                        feedbackElement.textContent = 'Speech recognition failed. Please try typing.';
                        feedbackElement.className = 'incorrect';
                        voiceInputBtn.textContent = 'ðŸŽ¤ Speak Answer';
                        voiceInputBtn.disabled = false;
                    };

                    speechRecognition.onend = () => {
                        voiceInputBtn.textContent = 'ðŸŽ¤ Speak Answer';
                        // If not already disabled by correct answer, re-enable
                        if (!userInput.disabled) {
                            voiceInputBtn.disabled = false;
                        }
                    };

                    speechRecognition.start();
                } else {
                    feedbackElement.textContent = 'Speech Recognition not supported in this browser. Please use keyboard input.';
                    feedbackElement.className = 'incorrect';
                    voiceInputBtn.disabled = true; // Disable the button if not supported
                }
            });

            nextCardBtn.addEventListener('click', displayNewCard);

            // --- Snow Effect Initialization ---
            function createSnowflake() {
                const snowflake = document.createElement('div');
                snowflake.classList.add('snowflake');
                snowflake.style.width = `${Math.random() * 8 + 5}px`; // Random size between 5px and 13px
                snowflake.style.height = snowflake.style.width; // Keep it round
                snowflake.style.left = `${Math.random() * 100}vw`; // Random starting X position across the viewport
                snowflake.style.animationDuration = `${Math.random() * 3 + 2}s`; // Random speed between 2s and 5s
                snowflake.style.animationDelay = `-${Math.random() * 5}s`; // Random start delay to spread out snowflakes
                snowflake.style.setProperty('--sideways-drift', `${(Math.random() - 0.5) * 50}px`); // Random horizontal drift

                snowContainer.appendChild(snowflake);

                // Remove snowflake after it falls offscreen and create a new one
                snowflake.addEventListener('animationend', () => { // Use 'animationend' for consistent removal
                    snowflake.remove();
                    createSnowflake(); // Create a new one to keep the effect going
                });
            }

            // Create initial snowflakes
            for (let i = 0; i < numberOfSnowflakes; i++) {
                createSnowflake();
            }

            // Initial game setup
            displayNewCard();
        });
    </script>
</body>
</html>