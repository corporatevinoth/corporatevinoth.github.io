<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Number Talk - Learn Numbers with Voice!</title>
    <meta name="description" content="Fun educational game for kids to learn reading numbers 1-100 using voice recognition">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Arial Rounded MT Bold', cursive;
        }

        body {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-x: hidden;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            padding: 30px;
            max-width: 600px;
            width: 100%;
            text-align: center;
            position: relative;
            backdrop-filter: blur(10px);
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        .home-btn {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 6px;
            padding: 8px 12px;
            text-decoration: none;
            font-size: 0.9em;
            z-index: 11;
            transition: background 0.3s;
        }

        .home-btn:hover {
            background: rgba(0,0,0,0.9);
        }

        .header {
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5em;
            color: #ff6b6b;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            animation: titleGlow 2s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            from { text-shadow: 2px 2px 4px rgba(0,0,0,0.1); }
            to { text-shadow: 2px 2px 8px rgba(255, 107, 107, 0.5); }
        }

        .subtitle {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 20px;
        }

        .instructions {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(255, 235, 238, 0.9));
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            font-size: 1em;
            color: #666;
            line-height: 1.6;
            border: 2px solid rgba(255, 107, 107, 0.2);
        }

        .instructions strong {
            color: #ff6b6b;
            font-size: 1.1em;
        }

        .number-display {
            font-size: 8em;
            font-weight: bold;
            color: #4ecdc4;
            margin: 30px 0;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            animation: bounce 2s infinite;
            position: relative;
        }

        .number-display::after {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, #ffeaa7, #fab1a0, #ff9ff3, #54a0ff);
            border-radius: 20px;
            z-index: -1;
            opacity: 0.7;
            animation: rotate 4s linear infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0) scale(1);
            }
            40% {
                transform: translateY(-10px) scale(1.05);
            }
            60% {
                transform: translateY(-5px) scale(1.02);
            }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .number-display.correct {
            color: #45b7d1;
            animation: celebrate 1s ease;
        }

        .number-display.incorrect {
            color: #ff6b6b;
            animation: shake 0.5s ease;
        }

        @keyframes celebrate {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .progress {
            margin: 20px 0;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            padding: 15px;
            border: 2px solid rgba(78, 205, 196, 0.3);
        }

        .progress-bar {
            background: linear-gradient(90deg, #ff9a9e 0%, #fecfef 100%);
            height: 25px;
            border-radius: 12px;
            transition: width 0.5s ease;
            width: 0%;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            border-radius: 12px;
        }

        .progress-text {
            margin-top: 10px;
            font-size: 1.1em;
            color: #666;
            font-weight: bold;
        }

        .controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin: 30px 0;
        }

        .record-btn {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 1.8em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
            outline: none;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
        }

        .record-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
        }

        .record-btn:active {
            transform: scale(0.95);
        }

        .record-btn.recording {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            animation: pulse 1s infinite;
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.5);
        }

        .record-btn.listening {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            animation: listeningPulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes listeningPulse {
            0% { transform: scale(1); box-shadow: 0 8px 25px rgba(78, 205, 196, 0.5); }
            50% { transform: scale(1.05); box-shadow: 0 8px 35px rgba(78, 205, 196, 0.7); }
            100% { transform: scale(1); box-shadow: 0 8px 25px rgba(78, 205, 196, 0.5); }
        }

        .record-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.6s ease;
        }

        .record-btn:active::before {
            width: 200px;
            height: 200px;
        }

        .record-status {
            font-size: 1.2em;
            font-weight: bold;
            margin-top: 10px;
            min-height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .action-btns {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            outline: none;
            min-width: 120px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(78, 205, 196, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            color: #333;
            box-shadow: 0 5px 15px rgba(255, 234, 167, 0.3);
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 234, 167, 0.4);
        }

        .feedback {
            margin: 20px 0;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .success-message {
            color: #45b7d1;
            font-size: 1.8em;
            font-weight: bold;
            animation: fadeIn 0.5s ease;
            text-shadow: 2px 2px 4px rgba(69, 183, 209, 0.3);
        }

        .error-message {
            color: #ff6b6b;
            font-size: 1.8em;
            font-weight: bold;
            animation: fadeIn 0.5s ease;
            text-shadow: 2px 2px 4px rgba(255, 107, 107, 0.3);
        }

        .info-message {
            color: #667eea;
            font-size: 1.5em;
            font-weight: bold;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 15px;
            height: 15px;
            background: #ffd93d;
            border-radius: 50%;
            animation: float 3s ease-in-out infinite;
            box-shadow: 0 0 10px rgba(255, 217, 61, 0.5);
        }

        .particle:nth-child(odd) {
            background: #ff6b6b;
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }

        .particle:nth-child(3n) {
            background: #4ecdc4;
            box-shadow: 0 0 10px rgba(78, 205, 196, 0.5);
        }

        .particle:nth-child(4n) {
            background: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(0);
                opacity: 1;
            }
            10% {
                transform: translateY(90vh) rotate(36deg) scale(1);
            }
            90% {
                transform: translateY(10vh) rotate(324deg) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg) scale(0);
                opacity: 0;
            }
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        .star {
            position: absolute;
            background: #ffd93d;
            border-radius: 50%;
            animation: twinkle 2s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }

        .accessibility-notice {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 0.9em;
            max-width: 200px;
            z-index: 1001;
            display: none;
        }

        @media (max-width: 600px) {
            .game-container {
                padding: 20px;
                margin: 10px;
            }

            h1 {
                font-size: 2em;
            }

            .number-display {
                font-size: 6em;
                margin: 20px 0;
            }

            .record-btn {
                width: 120px;
                height: 120px;
                font-size: 3em;
            }

            .action-btns {
                flex-direction: column;
                width: 100%;
            }

            .btn {
                width: 100%;
                margin: 5px 0;
            }

            .instructions {
                font-size: 0.9em;
                padding: 15px;
            }

            .feedback {
                padding: 15px;
            }

            .success-message, .error-message, .info-message {
                font-size: 1.4em;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            .number-display, .record-btn, .btn, .particle, .star {
                animation: none !important;
            }
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .game-container {
                background: white;
                border: 3px solid black;
            }

            .number-display {
                color: black;
                text-shadow: none;
            }

            .record-btn {
                border: 3px solid black;
            }
        }

        /* Focus styles for accessibility */
        .record-btn:focus, .btn:focus {
            outline: 3px solid #667eea;
            outline-offset: 2px;
        }

        /* Loading animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <a href="../index.html" class="home-btn" title="Back to Home">üè† Home</a>

    <div class="game-container">
        <div class="header">
            <h1>üî¢ Number Talk!</h1>
            <p class="subtitle">Learn numbers by speaking them out loud!</p>
        </div>

        <div class="instructions">
            <strong>How to play:</strong> Look at the big number, click the microphone button üé§, and say the number clearly. If you're right, you'll see a celebration! If not, try again! üìö‚ú®
        </div>

        <div class="number-display" id="numberDisplay">1</div>

        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
            <div class="progress-text" id="progressText">Number 1 of 100</div>
        </div>

        <div class="controls">
            <button class="record-btn" id="recordBtn" title="Click to speak the number" aria-label="Click to start speaking the number">
                Speak
            </button>
            <div class="record-status" id="recordStatus" aria-live="polite"></div>
            <div class="action-btns">
                <button class="btn btn-secondary" id="tryAgainBtn" style="display: none;" aria-label="Try speaking again">
                    Try Again üîÑ
                </button>
            </div>
        </div>

        <div class="feedback" id="feedback" aria-live="assertive"></div>
    </div>

    <div class="celebration" id="celebration" style="display: none;"></div>
    <div class="stars" id="stars" style="display: none;"></div>

    <div class="accessibility-notice" id="accessibilityNotice">
        Voice recognition may not work in all browsers. Try Chrome or Edge for best results.
    </div>

    <script>
        class NumberLearningGame {
            constructor() {
                this.currentNumber = 1;
                this.isRecording = false;
                this.isListening = false;
                this.recognition = null;
                this.audioContext = null;
                this.successSound = null;
                this.errorSound = null;
                this.celebrationSound = null;

                this.init();
                this.setupEventListeners();
                this.loadSounds();
                this.createStars();
                this.checkBrowserSupport();
            }

            init() {
                this.updateDisplay();
                this.initSpeechRecognition();
            }

            checkBrowserSupport() {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

                if (!SpeechRecognition) {
                    document.getElementById('accessibilityNotice').style.display = 'block';
                    document.getElementById('recordBtn').disabled = true;
                    document.getElementById('recordBtn').textContent = '‚ùå';
                    document.getElementById('recordBtn').title = 'Speech recognition not supported in this browser';
                    this.showFeedback('Sorry, voice recognition is not supported in this browser. Try Chrome or Edge! üåê', 'error');
                }
            }

            initSpeechRecognition() {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

                if (!SpeechRecognition) return;

                this.recognition = new SpeechRecognition();
                this.recognition.continuous = false;
                this.recognition.interimResults = false;
                this.recognition.lang = 'en-US';
                this.recognition.maxAlternatives = 3;

                this.recognition.onstart = () => {
                    this.isRecording = true;
                    this.isListening = true;
                    document.getElementById('recordBtn').classList.add('listening');
                    document.getElementById('recordBtn').classList.remove('recording');
                    this.showRecordStatus('Listening... üéß');
                    this.showFeedback('Say the number clearly! üì¢', 'info');
                };

                this.recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript.toLowerCase().trim();
                    console.log('Heard:', transcript); // For debugging
                    this.validateAnswer(transcript);
                };

                this.recognition.onerror = (event) => {
                    console.error('Speech recognition error:', event.error);
                    let errorMessage = 'Oops! I didn\'t hear you clearly. ';

                    switch(event.error) {
                        case 'no-speech':
                            errorMessage += 'Try speaking louder! üîä';
                            break;
                        case 'audio-capture':
                            errorMessage += 'Check your microphone! üé§';
                            break;
                        case 'not-allowed':
                            errorMessage += 'Please allow microphone access! ‚öôÔ∏è';
                            break;
                        default:
                            errorMessage += 'Let\'s try again! üí™';
                    }

                    this.showFeedback(errorMessage, 'error');
                    this.resetRecordingState();
                };

                this.recognition.onend = () => {
                    this.resetRecordingState();
                };
            }

            setupEventListeners() {
                const recordBtn = document.getElementById('recordBtn');

                recordBtn.addEventListener('click', () => {
                    if (recordBtn.disabled) return;

                    if (!this.isRecording) {
                        this.startRecording();
                    } else {
                        this.stopRecording();
                    }
                });

                document.getElementById('tryAgainBtn').addEventListener('click', () => {
                    this.resetForRetry();
                });

                // Keyboard support
                document.addEventListener('keydown', (e) => {
                    if (e.key === ' ' || e.key === 'Enter') {
                        e.preventDefault();
                        recordBtn.click();
                    } else if (e.key === 'ArrowLeft' && !document.getElementById('tryAgainBtn').style.display === 'none') {
                        document.getElementById('tryAgainBtn').click();
                    }
                });
            }

            loadSounds() {
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                } catch (e) {
                    console.warn('Web Audio API not supported');
                    return;
                }
            }

            createSuccessSound() {
                if (!this.audioContext) return;

                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);

                // Create a cheerful melody
                oscillator.frequency.setValueAtTime(523, this.audioContext.currentTime); // C5
                oscillator.frequency.setValueAtTime(659, this.audioContext.currentTime + 0.1); // E5
                oscillator.frequency.setValueAtTime(784, this.audioContext.currentTime + 0.2); // G5
                oscillator.frequency.setValueAtTime(1047, this.audioContext.currentTime + 0.3); // C6

                gainNode.gain.setValueAtTime(0.2, this.audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.6);

                oscillator.start();
                oscillator.stop(this.audioContext.currentTime + 0.6);
            }

            createErrorSound() {
                if (!this.audioContext) return;

                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);

                oscillator.frequency.value = 220; // A3
                oscillator.type = 'sawtooth';

                gainNode.gain.setValueAtTime(0.15, this.audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.4);

                oscillator.start();
                oscillator.stop(this.audioContext.currentTime + 0.4);
            }

            createCelebrationSound() {
                if (!this.audioContext) return;

                // Create multiple oscillators for a celebration sound
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => {
                        const oscillator = this.audioContext.createOscillator();
                        const gainNode = this.audioContext.createGain();

                        oscillator.connect(gainNode);
                        gainNode.connect(this.audioContext.destination);

                        const freq = 523 + (i * 100); // Rising notes
                        oscillator.frequency.value = freq;

                        gainNode.gain.setValueAtTime(0.1, this.audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.3);

                        oscillator.start();
                        oscillator.stop(this.audioContext.currentTime + 0.3);
                    }, i * 100);
                }
            }

            startRecording() {
                if (this.recognition && !this.isRecording) {
                    try {
                        this.recognition.start();
                    } catch (e) {
                        console.error('Error starting recognition:', e);
                        this.showFeedback('Error starting voice recognition. Please try again! üîÑ', 'error');
                    }
                }
            }

            stopRecording() {
                if (this.recognition && this.isRecording) {
                    this.recognition.stop();
                }
            }

            validateAnswer(transcript) {
                const numberWords = this.numberToWords(this.currentNumber);
                const transcriptWords = transcript.split(/[\s\-]+/); // Split on spaces and hyphens

                console.log('Number words:', numberWords);
                console.log('Transcript words:', transcriptWords);

                // Check if transcript contains the correct number word(s)
                let isCorrect = false;

                // Direct number match
                if (transcriptWords.includes(this.currentNumber.toString())) {
                    isCorrect = true;
                }
                // Word match
                else if (numberWords.some(word => transcriptWords.includes(word.toLowerCase()))) {
                    isCorrect = true;
                }
                // Special cases for teens and compound numbers
                else if (this.currentNumber >= 20 && this.currentNumber < 100) {
                    const tens = Math.floor(this.currentNumber / 10);
                    const ones = this.currentNumber % 10;

                    if (ones === 0) {
                        // Check for just tens (twenty, thirty, etc.)
                        isCorrect = transcriptWords.some(word =>
                            this.numberToWords(tens * 10).includes(word.toLowerCase())
                        );
                    } else {
                        // Check for tens + ones combination
                        const tensWords = this.numberToWords(tens * 10);
                        const onesWords = this.numberToWords(ones);

                        isCorrect = tensWords.some(tensWord =>
                            onesWords.some(onesWord =>
                                transcriptWords.includes(tensWord.toLowerCase()) &&
                                transcriptWords.includes(onesWord.toLowerCase())
                            )
                        );
                    }
                }

                if (isCorrect) {
                    this.handleCorrectAnswer();
                } else {
                    this.handleIncorrectAnswer(transcript);
                }
            }

            numberToWords(num) {
                const ones = ['', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine'];
                const teens = ['ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'];
                const tens = ['', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'];

                if (num === 0) return ['zero'];
                if (num < 10) return [ones[num]];
                if (num < 20) return [teens[num - 10]];
                if (num < 100) {
                    const ten = Math.floor(num / 10);
                    const one = num % 10;
                    if (one === 0) return [tens[ten]];
                    return [tens[ten], ones[one]];
                }
                return [num.toString()]; // For numbers 100+
            }

            handleCorrectAnswer() {
                // Play success sound
                this.createSuccessSound();
                setTimeout(() => this.createCelebrationSound(), 200);

                // Show celebration animation
                this.showCelebration();

                // Update UI
                document.getElementById('numberDisplay').classList.add('correct');
                this.showFeedback('üéâ Fantastic! You got it right! üéä', 'success');

                // Show next button
                document.getElementById('nextBtn').style.display = 'inline-block';
                document.getElementById('tryAgainBtn').style.display = 'none';

                // Update progress
                this.updateProgress();

                // Announce for screen readers
                this.announceResult('Correct! Great job!');
            }

            handleIncorrectAnswer(transcript) {
                // Play error sound
                this.createErrorSound();

                // Update UI
                document.getElementById('numberDisplay').classList.add('incorrect');
                this.showFeedback(`ü§î You said "${transcript}". Let's try again! üí™`, 'error');

                // Show try again button
                document.getElementById('tryAgainBtn').style.display = 'inline-block';
                document.getElementById('nextBtn').style.display = 'none';

                // Announce for screen readers
                this.announceResult('Not quite right. Try again!');
            }

            showCelebration() {
                const celebration = document.getElementById('celebration');
                celebration.style.display = 'block';

                // Create particles
                for (let i = 0; i < 30; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDelay = Math.random() * 2 + 's';
                    particle.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    celebration.appendChild(particle);
                }

                // Show stars
                this.showStars();

                // Hide celebration after animation
                setTimeout(() => {
                    celebration.style.display = 'none';
                    celebration.innerHTML = '';
                    document.getElementById('stars').style.display = 'none';
                    document.getElementById('stars').innerHTML = '';
                }, 4000);
            }

            showStars() {
                const starsContainer = document.getElementById('stars');
                starsContainer.style.display = 'block';

                for (let i = 0; i < 20; i++) {
                    const star = document.createElement('div');
                    star.className = 'star';
                    star.style.left = Math.random() * 100 + '%';
                    star.style.top = Math.random() * 100 + '%';
                    star.style.animationDelay = Math.random() * 2 + 's';
                    star.style.width = (Math.random() * 10 + 5) + 'px';
                    star.style.height = star.style.width;
                    starsContainer.appendChild(star);
                }
            }

            createStars() {
                // Create some ambient stars in the background
                const starsContainer = document.getElementById('stars');

                for (let i = 0; i < 50; i++) {
                    const star = document.createElement('div');
                    star.className = 'star';
                    star.style.left = Math.random() * 100 + '%';
                    star.style.top = Math.random() * 100 + '%';
                    star.style.animationDelay = Math.random() * 3 + 's';
                    star.style.width = (Math.random() * 3 + 1) + 'px';
                    star.style.height = star.style.width;
                    star.style.opacity = Math.random() * 0.5 + 0.1;
                    starsContainer.appendChild(star);
                }
            }

            showFeedback(message, type) {
                const feedback = document.getElementById('feedback');
                feedback.innerHTML = `<div class="${type}-message">${message}</div>`;
            }

            showRecordStatus(message) {
                document.getElementById('recordStatus').textContent = message;
            }

            resetRecordingState() {
                this.isRecording = false;
                this.isListening = false;
                document.getElementById('recordBtn').classList.remove('recording', 'listening');
                this.showRecordStatus('');
            }

            resetForRetry() {
                document.getElementById('numberDisplay').classList.remove('incorrect');
                document.getElementById('tryAgainBtn').style.display = 'none';
                document.getElementById('feedback').innerHTML = '';
                this.showRecordStatus('');
            }

            nextNumber() {
                if (this.currentNumber < 100) {
                    this.currentNumber++;
                    this.updateDisplay();
                    document.getElementById('numberDisplay').classList.remove('correct');
                    document.getElementById('nextBtn').style.display = 'none';
                    document.getElementById('feedback').innerHTML = '';
                    this.showRecordStatus('');
                } else {
                    this.showCompletion();
                }
            }

            showCompletion() {
                this.showFeedback('üéä Congratulations! You completed all numbers! üèÜ', 'success');
                this.showCelebration();

                // Create a completion message
                setTimeout(() => {
                    if (confirm('Amazing! You learned all numbers from 1 to 100! Would you like to play again?')) {
                        this.restartGame();
                    }
                }, 3000);
            }

            restartGame() {
                this.currentNumber = 1;
                this.updateDisplay();
                document.getElementById('numberDisplay').classList.remove('correct', 'incorrect');
                document.getElementById('nextBtn').style.display = 'none';
                document.getElementById('tryAgainBtn').style.display = 'none';
                document.getElementById('feedback').innerHTML = '';
                this.showRecordStatus('');
            }

            updateDisplay() {
                document.getElementById('numberDisplay').textContent = this.currentNumber;
                document.getElementById('progressText').textContent = `Number ${this.currentNumber} of 100`;
                document.getElementById('progressBar').style.width = ((this.currentNumber - 1) / 99) * 100 + '%';
            }

            updateProgress() {
                // Could add more progress tracking here
            }

            announceResult(message) {
                // Screen reader announcement
                const announcement = document.createElement('div');
                announcement.setAttribute('aria-live', 'assertive');
                announcement.setAttribute('aria-atomic', 'true');
                announcement.style.position = 'absolute';
                announcement.style.left = '-10000px';
                announcement.style.width = '1px';
                announcement.style.height = '1px';
                announcement.style.overflow = 'hidden';
                announcement.textContent = message;

                document.body.appendChild(announcement);

                setTimeout(() => {
                    document.body.removeChild(announcement);
                }, 1000);
            }
        }

        // Initialize the game when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new NumberLearningGame();
        });

        // Handle page visibility changes (pause/resume audio context)
        document.addEventListener('visibilitychange', () => {
            if (document.hidden && window.audioContext) {
                window.audioContext.suspend();
            } else if (!document.hidden && window.audioContext) {
                window.audioContext.resume();
            }
        });
    </script>
</body>
</html></content>
<parameter name="filePath">/workspaces/corporatevinoth.github.io/Games/numberTalk.html